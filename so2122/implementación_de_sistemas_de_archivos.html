<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<meta name="author" content="JesÃºs Torres">
<title>Sistemas Operativos</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;-webkit-tap-highlight-color:transparent}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<meta name='robots' content='noindex,nofollow'>
<link rel="icon" href="media/extras/favicon.ico" sizes="any">
<link rel="icon" href="media/extras/ssoo-icon.svg" type="image/svg+xml">
<link rel="icon" type="image/png" sizes="192x192" href="media/extras/ssoo-icon-192.png">
<link rel="icon" type="image/png" sizes="512x512" href="media/extras/ssoo-icon-512.png">
<link rel="apple-touch-icon" href="media/extras/ssoo-apple-touch-icon.png"><!-- 180Ã180 -->
<link rel="stylesheet" href="media/extras/inlineDisqussions.css">
<style>
    body {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
    }
    content {
        flex: 1;
    }
    #header, #content, #footnotes {
        margin: 0 auto 0 5em
    }
    #content h1>a.anchor, h2>a.anchor, h3>a.anchor,
    #toctitle>a.anchor, .sidebarblock>.content>.title>a.anchor,
    h4>a.anchor, h5>a.anchor, h6>a.anchor {
        color: #ba3925;
    }
    .imageblock {
        text-align: center;
    }
    .imageblock > .content {
        margin-bottom: 1rem;
    }
    .imageblock > .title {
        text-align: inherit;
    }
    .tableblock > .lightcell {
        color: gray;
    }
    table tfoot td p {
        font-weight: bold;
    }
    #footer-text {
        margin: 0 auto;
        max-width: 62.5em;
        padding-left: .9375em;
        padding-right: .9375em;
    }
    #footer-text a {
        color: hsla(0,0%,100%,.8);
        text-decoration: none;
        font-weight: bold;
    }
    #footer-text a:hover {
        color: hsla(0,0%,100%,.8);
    }
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="media/extras/inlineDisqussions.js"></script>
<script type="text/javascript">
    window.onload = function(){
        if ('true' === 'true') {
            setTimeout(function() {
                disqus_shortname = 'ull-esit-sistemas-operativos';
                jQuery(document).ready(function() {
                    jQuery("img, p, .colist td, .stemblock").inlineDisqussions();
                });
            }, 500);
        }
    }
</script>
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
<style>
.admonitionblock td.icon .icon-time:before {content:"\f017";color:#f28500;}
</style>
</head>
<body id="implementaciÃ³n_de_sistemas_de_archivos" class="book toc2 toc-left">
<div id="header">
<h1>Sistemas Operativos</h1>
<div class="details">
<span id="author" class="author">JesÃºs Torres</span><br>
<span id="email" class="email"><a href="mailto:jmtorres@ull.es">jmtorres@ull.es</a></span><br>
<span id="revdate">Curso 2021-2022</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Tabla de Contenido</div>
<p><span class="toc-root"><a href="main.html">Sistemas Operativos</a></span></p><ul class="sectlevel1">
<li><a href="ediciones_y_licencia.html">Ediciones y licencia</a>
</li>
<li><a href="cÃ³digo_de_los_ejemplos.html">CÃ³digo de los ejemplos</a>
</li>
<li><a href="introducciÃ³n.html">Parte I: IntroducciÃ³n</a>
</li>
<li><a href="organizaciÃ³n_de_los_sistemas_operativos.html">Parte II: OrganizaciÃ³n de los sistemas operativos</a>
</li>
<li><a href="gestiÃ³n_de_procesos.html">Parte III: GestiÃ³n de procesos</a>
</li>
<li><a href="gestiÃ³n_de_la_memoria.html">Parte IV: GestiÃ³n de la memoria</a>
</li>
<li><a href="gestiÃ³n_del_almacenamiento.html">Parte V: GestiÃ³n del almacenamiento</a>
<ul class="sectlevel1">
<li><a href="almacenamiento_secundario.html">18. Almacenamiento secundario</a>
</li>
<li><a href="sistema_de_archivos.html">19. Sistemas de archivos</a>
</li>
<li><a href="implementaciÃ³n_de_sistemas_de_archivos.html"><span class="toc-current">20. ImplementaciÃ³n de sistemas de archivos</span></a>
<ul class="sectlevel2">
<li><a href="implementaciÃ³n_de_sistemas_de_archivos.html#_implementaciÃ³n_de_directorios">20.1. ImplementaciÃ³n de directorios</a>
</li>
<li><a href="implementaciÃ³n_de_sistemas_de_archivos.html#_mÃ©todos_de_asignaciÃ³n">20.2. MÃ©todos de asignaciÃ³n</a>
</li>
<li><a href="implementaciÃ³n_de_sistemas_de_archivos.html#_gestiÃ³n_del_espacio_libre">20.3. GestiÃ³n del espacio libre</a>
</li>
<li><a href="implementaciÃ³n_de_sistemas_de_archivos.html#_sistemas_de_archivos_virtuales">20.4. Sistemas de archivos virtuales</a>
</li>
<li><a href="implementaciÃ³n_de_sistemas_de_archivos.html#_planificaciÃ³n_de_disco">20.5. PlanificaciÃ³n de disco</a>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="bibliografÃ­a.html">BibliografÃ­a</a>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="implementaciÃ³n_de_sistemas_de_archivos"><a class="anchor" href="#implementaciÃ³n_de_sistemas_de_archivos"></a>20. ImplementaciÃ³n de sistemas de archivos</h2>
<div class="sectionbody">
<div class="admonitionblock time">
<table>
<tr>
<td class="icon">
<i class="fa icon-time" title=""></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Tiempo de lectura:</strong> 31 minutos</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Como ya hemos comentado, un sistema de archivos suele estar compuesto de varios niveles diferentes.
En la <a href="sistema_de_archivos.html#fig-estructura-sistema-de-archivos">Figura 65</a> se muestra un ejemplo de la estructura de un sistema de archivos diseÃ±ado en niveles.
Cada nivel utiliza las funciones de los niveles inferiores y proporciona nuevas funciones a los niveles superiores.
El papel de cada uno de estos niveles fue descrito en el <a href="sistema_de_archivos.html#_estructura_de_un_sistema_de_archivos">Apartado 19.1</a>.
Mientras que las estructuras de metadatos utilizadas, tanto en la memoria como en disco, fueron tratadas brevemente en el <a href="sistema_de_archivos.html#_estructuras_de_metadatos_en_disco">Apartado 19.2</a> y en el <a href="sistema_de_archivos.html#_estructuras_de_metadatos_en_memoria">Apartado 19.3</a>.</p>
</div>
<div class="paragraph">
<p>A continuaciÃ³n, vamos a profundizar aÃºn mÃ¡s en las estructuras y operaciones utilizadas para implementar los sistemas de archivos</p>
</div>
<div class="sect2">
<h3 id="_implementaciÃ³n_de_directorios"><a class="anchor" href="#_implementaciÃ³n_de_directorios"></a>20.1. ImplementaciÃ³n de directorios</h3>
<div class="paragraph">
<p>Cada directorio suele contener una estructura de datos que relaciona el nombre de cada archivo que contiene con el identificador de su <strong>FCB</strong>.
Dicho identificador permite localizar el FCB en la <strong>tabla de contenidos del volumen</strong>, que contiene el resto de los atributos del archivo.</p>
</div>
<div class="paragraph">
<p>En esta secciÃ³n vamos a estudiar las formas mÃ¡s comunes de implementar la estructura de datos de un directorio.</p>
</div>
<div class="sect3">
<h4 id="_lista_lineal"><a class="anchor" href="#_lista_lineal"></a>20.1.1. Lista lineal</h4>
<div class="paragraph">
<p>El mÃ©todo mÃ¡s simple para implementar un directorio consiste en utilizar una lista lineal o vector de nombres de archivos e identificadores del <strong>FCB</strong>.</p>
</div>
<div class="paragraph">
<p>Las acciones a realizar, para implementar cada una de las posibles operaciones sobre el directorio, serÃ­an:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Crear un archivo</strong>.
Primero se explora el directorio para estar seguros de que no haya ningÃºn archivo con el mismo nombre.
DespuÃ©s se aÃ±ade una nueva entrada al final del directorio.</p>
</li>
<li>
<p><strong>Borrar un archivo</strong>.
Primero se explora la lista en busca del archivo especificado y, una vez localizada, se libera la entrada correspondiente.
Para reutilizar la entrada del directorio tenemos diversas alternativas:</p>
<div class="ulist">
<ul>
<li>
<p>Se puede marcar la entrada como no utilizada.
Para eso se puede emplear un nombre especial o utilizar algÃºn campo adicional âa parte de nombre de archivo e identificador del <strong>FCB</strong>â que se haya aÃ±adido a la entrada con ese propÃ³sito.</p>
</li>
<li>
<p>Insertar un puntero a la entrada en una lista de entradas libres, que se guarda dentro del mismo directorio.</p>
</li>
<li>
<p>Copiar la Ãºltima entrada del directorio en la ubicaciÃ³n que ha quedado libre y reducir la longitud del directorio.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>La principal desventaja de un directorio implementado como una lista lineal de entradas es que para localizar un archivo es necesario realizar una bÃºsqueda lineal, lo cual puede resultar muy costoso en directorios con un nÃºmero muy grande de archivos.
Utilizando una lista ordenada se puede reducir el tiempo medio de bÃºsqueda, pero complica los procesos de creaciÃ³n y borrado, pues puede que sea necesario mover cantidades importantes de informaciÃ³n para mantener la lista ordenada.</p>
</div>
<div class="paragraph">
<p>TambiÃ©n se puede utilizar una lista enlazada, tanto para reducir el tiempo necesario para borrar un archivo como para facilitar la tarea de mantener ordenada la lista.</p>
</div>
<div class="paragraph">
<p>Los sistemas de archivos <a href="https://es.wikipedia.org/wiki/Tabla_de_asignaci%C3%B3n_de_archivos">FAT</a> y <a href="https://es.wikipedia.org/w/index.php?title=FAT32">FAT32</a> implementan los directorios utilizando una lista lineal, donde en cada entrada se almacena el nombre del archivo y el <strong>FCB</strong> del mismo.
Al borrar un archivo, la entrada correspondiente se marca poniendo 0xE5 en el primer caracter del nombre del archivo.</p>
</div>
<div class="paragraph">
<p>Los sistemas de archivos <a href="https://es.wikipedia.org/wiki/Ext2">ext2</a> y <a href="https://es.wikipedia.org/wiki/Unix_File_System">UFS</a> tambiÃ©n utilizan una lista lineal no ordenada, donde solo se almacena el nombre del archivo o subdirectorio y el identificador del <strong>inodo</strong> âel FCB, esos sistemas de archivoâ correspondiente.
En caso de borrar un archivo, el identificador del <strong>inodo</strong> se pone a 0.</p>
</div>
</div>
<div class="sect3">
<h4 id="_tabla_de_dispersiÃ³n"><a class="anchor" href="#_tabla_de_dispersiÃ³n"></a>20.1.2. Tabla de dispersiÃ³n</h4>
<div class="paragraph">
<p>En los directorios implementados con una <a href="https://es.wikipedia.org/wiki/Tabla_hash">tabla de dispersiÃ³n</a> tambiÃ©n se almacenan las entradas de directorio en una lista lineal, pero al mismo tiempo se utiliza una tabla de dispersiÃ³n para reducir enormemente el tiempo de bÃºsqueda en el directorio.
Para obtener la ubicaciÃ³n de dicho archivo dentro de la lista lineal, se usa un Ã­ndice calculado con cierta funciÃ³n de dispersiÃ³n a partir del nombre del archivo.</p>
</div>
<div class="paragraph">
<p>El Ãºnico inconveniente es que debemos tratar la posible apariciÃ³n de colisiones, que son aquellas situaciones en las que dos nombres de archivo dan lugar, al aplicarles la funciÃ³n de dispersiÃ³n, la misma ubicaciÃ³n en la tabla.
Esto se puede resolver utilizando una lista enlazada en cada entrada de la lista âcada entrada en la lista seÃ±alarÃ­a la ubicaciÃ³n de la siguiente entrada de la lista que tiene el mismo valor para la funciÃ³n de dispersiÃ³nâ a cambio de que las bÃºsquedas sean un poco mÃ¡s lentas.
En cualquier caso, este mÃ©todo serÃ¡ normalmente mÃ¡s rÃ¡pido que una bÃºsqueda lineal por todo el directorio.</p>
</div>
</div>
<div class="sect3">
<h4 id="_Ã¡rbol_b"><a class="anchor" href="#_Ã¡rbol_b"></a>20.1.3. Ãrbol B</h4>
<div class="paragraph">
<p>Para mantener el directorio ordenado, algunos sistemas de archivos modernos utilizan estructuras de datos en Ã¡rbol mÃ¡s sofisticadas, como por ejemplo Ã¡rboles B.</p>
</div>
<div class="paragraph">
<p>Un caso concreto es el sistema de archivos <a href="https://es.wikipedia.org/wiki/NTFS">NTFS</a>, utilizado por Microsoft Windows.
<a href="https://es.wikipedia.org/wiki/NTFS">NTFS</a> utiliza una estructura de datos denominada <a href="https://es.wikipedia.org/wiki/%C3%81rbol_B%2B">Ã¡rbol B+</a> para almacenar el Ã­ndice de los nombres de archivo contenidos en un directorio.</p>
</div>
<div class="paragraph">
<p>En la entrada en la <strong>MFT</strong> (<em>Master File Table</em>) de cada directorio se almacena un atributo denominado <strong>raÃ­z del Ã­ndice</strong>.
Si el directorio es de pequeÃ±o tamaÃ±o, la <strong>raÃ­z del Ã­ndice</strong> contiene todas las entradas de archivos del directorio, pero para un directorio de gran tamaÃ±o, la <strong>raÃ­z del Ã­ndice</strong> solo puede almacenar unas pocas entradas de archivos del directorio.
En ese caso la <strong>raÃ­z del Ã­ndice</strong> contiene el nivel superior del Ã¡rbol B+.
Es decir, cada una de esas entradas de archivos en la <strong>raÃ­z del Ã­ndice</strong> incluye tambiÃ©n un puntero al bloque del disco que contiene un nodo del Ã¡rbol con las entradas con nombres alfabÃ©ticamente anteriores a ese.
Si en dicho nodo tampoco caben todas las entradas, solo podrÃ¡ contener algunas de ellas, por lo que cada una tendrÃ¡, a su vez, un puntero a un nuevo nodo del Ã¡rbol; y asÃ­ sucesivamente.</p>
</div>
<div class="paragraph">
<p>Las ventajas de los Ã¡rboles B+ son:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Eliminan el coste de reordenar las entradas del directorio.</p>
</li>
<li>
<p>La longitud desde la raÃ­z del Ã¡rbol hasta un nodo hoja es la misma para todas los caminos por el Ã¡rbol, por lo que el tiempo de bÃºsqueda tiene una cota superior.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">ImplementaciÃ³n de directorios en XFS</div>
<div class="paragraph">
<p>El sistema de archivos <a href="https://es.wikipedia.org/wiki/XFS">XFS</a> tambiÃ©n utiliza un <a href="https://es.wikipedia.org/wiki/%C3%81rbol_B%2B">Ã¡rbol B+</a>, pero en este caso la implementaciÃ³n es un poco mÃ¡s compleja:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Un directorio de pequeÃ±o tamaÃ±o almacena sus entradas como una lista lineal no ordenada dentro de su mismo <strong>inodo</strong> o FCB.</p>
</li>
<li>
<p>Cuando el directorio no cabe en el <strong>inodo</strong> se le asigna un bloque propio, donde el directorio es implementado con una tabla de dispersiÃ³n, tal y como hemos visto anteriormente.</p>
</li>
<li>
<p>Cuando el tamaÃ±o del directorio excede el tamaÃ±o del bloque, la tabla de dispersiÃ³n se extrae y se almacena en un bloque diferente.
La lista lineal tambiÃ©n se extrae, pero no tiene que ser almacenada en un Ãºnico bloque, sino que puede estar repartida por distintos bloques a lo largo del disco.</p>
</li>
<li>
<p>Finalmente, cuando la tabla de dispersiÃ³n excede el tamaÃ±o de un bloque, dicha tabla se convierte en un Ã¡rbol B+.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mÃ©todos_de_asignaciÃ³n"><a class="anchor" href="#_mÃ©todos_de_asignaciÃ³n"></a>20.2. MÃ©todos de asignaciÃ³n</h3>
<div class="paragraph">
<p>El siguiente problema es cÃ³mo asignar el espacio disponible en el disco a los archivos almacenados, de forma que el espacio sea utilizado de forma eficiente y que se pueda acceder a los archivos de la forma mÃ¡s rÃ¡pida posible.</p>
</div>
<div class="paragraph">
<p>Como la unidad mÃ­nima de asignaciÃ³n de espacio a un archivo es el bloque, la fragmentaciÃ³n interna suele ser un problema comÃºn a todos los mÃ©todos que veremos a continuaciÃ³n.</p>
</div>
<div class="sect3">
<h4 id="_asignaciÃ³n_contigua"><a class="anchor" href="#_asignaciÃ³n_contigua"></a>20.2.1. AsignaciÃ³n contigua</h4>
<div class="paragraph">
<p>
La <strong>asignaciÃ³n contigua</strong> requiere que cada archivo ocupe un conjunto contiguo de bloques en el disco.
Esto es muy eficiente, puesto que el acceso a todos los datos de un archivo requiere un movimiento mÃ­nimo del cabezal del disco.</p>
</div>
<div class="paragraph">
<p>El problema de la <strong>asignaciÃ³n contigua</strong> puede verse como un caso concreto del problema de la asignaciÃ³n dinÃ¡mica del almacenamiento (vÃ©ase el <a href="memoria_principal.html#_asignaciÃ³n_contigua_de_memoria">Apartado 15.5</a>).
Es decir, que en un momento dado tendremos una peticiÃ³n de tamaÃ±o <em>N</em> que deberemos satisfacer con una lista de huecos libres de tamaÃ±o variable.
Como estudiamos anteriormente, las estrategias mÃ¡s comunes son las del <strong>primer ajuste</strong> y el <strong>mejor ajuste</strong>.</p>
</div>
<div class="sect4">
<h5 id="_fragmentaciÃ³n_externa_2"><a class="anchor" href="#_fragmentaciÃ³n_externa_2"></a>FragmentaciÃ³n externa</h5>
<div class="paragraph">
<p>La asignaciÃ³n contigua sufre el problema de la <strong>fragmentaciÃ³n externa</strong>.
La soluciÃ³n serÃ­a utilizar alguna forma de <strong>compactaciÃ³n</strong> para unir los huecos libres, pero esto puede llevar mucho tiempo en discos duros de gran tamaÃ±o y en algunos sistemas esta tarea tiene que realizarse con el dispositivo desmontado.
Por eso es conveniente evitar utilizar tÃ©cnicas de compactaciÃ³n en los sistemas en producciÃ³n.</p>
</div>
<div class="paragraph">
<p>Afortunadamente, la mayor parte de los sistemas operativos modernos que necesitan mecanismos de <strong>desfragmentaciÃ³n</strong> pueden realizar esta tarea sin detener el sistema, aunque la pÃ©rdida de rendimiento puede ser significativa.</p>
</div>
</div>
<div class="sect4">
<h5 id="_estimaciÃ³n_del_tamaÃ±o_del_archivo"><a class="anchor" href="#_estimaciÃ³n_del_tamaÃ±o_del_archivo"></a>EstimaciÃ³n del tamaÃ±o del archivo</h5>
<div class="paragraph">
<p>En la asignaciÃ³n contigua es necesario determinar cuÃ¡nto espacio necesita un archivo antes de asignÃ¡rselo.
El problema es que eso no siempre es posible.</p>
</div>
<div class="paragraph">
<p>Por ejemplo, si vamos a copiar un archivo, es indudable que conocemos de antemano cuÃ¡nto espacio necesita la copia.
Pero Â¿quÃ© ocurre cuando vamos a crear uno nuevo? Entonces al crear un archivo es necesario que el usuario haga una estimaciÃ³n del espacio que va a necesitar y se la indique al sistema.</p>
</div>
<div class="paragraph">
<p>Â¿Y si la estimaciÃ³n no es correcta o posteriormente queremos aÃ±adir nuevos datos al archivo?
Entonces, lo mÃ¡s probable es que el espacio situado a ambos lados del archivo ya estÃ© ocupado, si hemos utilizado la estrategia del <strong>mejor ajuste</strong>.
Para resolver este problema existen dos estrategias:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>La primera, es terminar el programa de usuario, emitiendo un error.
Entonces, el usuario deberÃ¡ volver a crear el archivo indicando mÃ¡s espacio y volver a ejecutar el programa.
Puesto que las ejecuciones repetidas pueden ser muy costosas, lo mÃ¡s comÃºn es que el usuario acabe sobreestimando el espacio, lo que darÃ¡ como resultado un desperdicio considerable de espacio.</p>
</li>
<li>
<p>La segunda, es buscar un hueco libre de mayor tamaÃ±o y copiar el contenido del archivo al nuevo espacio.
Esto puede hacerse siempre que exista suficiente espacio, aunque puede consumir bastante tiempo.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Para minimizar estos problemas, se puede implementar un esquema de asignaciÃ³n contigua modificado, donde se asigna inicialmente un bloque contiguo de espacio al archivo y, posteriormente, si dicho espacio resulta no ser lo suficientemente grande, se aÃ±ade otra Ã¡rea de espacio contiguo, denominado <strong>extensiÃ³n</strong>.</p>
</div>
<div class="paragraph">
<p>La ubicaciÃ³n de las <strong>extensiones</strong> de un archivo se registran en el FCB, guardando la direcciÃ³n del primer bloque de cada extensiÃ³n que compone el archivo y el nÃºmero de bloques que ocupa cada una.</p>
</div>
<div class="paragraph">
<p>Los sistemas de archivo <a href="https://es.wikipedia.org/wiki/XFS">XFS</a> y <a href="https://es.wikipedia.org/wiki/Ext4">ext4</a> utilizan <strong>extensiones</strong> para optimizar su funcionamiento.
El motivo es que cuantos mÃ¡s bloques contiguos sean asignados a un archivo, menos reposicionamientos del cabezal del disco son necesarios para leerlos.
En <a href="https://es.wikipedia.org/wiki/Ext4">ext4</a> el espacio se asigna a los archivos en <strong>extensiones</strong> de hasta 128 MiB, compuestas por bloques, generalmente, de 4 KiB.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_asignaciÃ³n_enlazada"><a class="anchor" href="#_asignaciÃ³n_enlazada"></a>20.2.2. AsignaciÃ³n enlazada</h4>
<div class="paragraph">
<p>
En la <strong>asignaciÃ³n enlazada</strong> cada archivo es una lista enlazada de bloques de disco, pudiendo estos bloques estar dispersos por todo el disco:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Cada entrada de directorio contiene un puntero al primer bloque.
En ocasiones, la entrada tambiÃ©n incluye un puntero al Ãºltimo, para facilitar aÃ±adir nuevos datos al final del archivo.</p>
</li>
<li>
<p>Cada bloque contiene un puntero al bloque siguiente.
Por ejemplo, si cada bloque tiene 512 bytes de tamaÃ±o y un puntero requiere 4 bytes, los bloques de disco tendrÃ¡n un tamaÃ±o efectivo de 508 bytes.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Este mecanismo resuelve todos los problemas de la asignaciÃ³n contigua y ademÃ¡s:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>No hay fragmentaciÃ³n externa</strong>, puesto que pueden utilizarse cualquier bloque libre para satisfacer una solicitud de espacio.</p>
</li>
<li>
<p><strong>No es necesario declarar el espacio del archivo</strong> en el momento de crearlo, pues el archivo podrÃ¡ siempre podrÃ¡ crecer mientras haya bloques libres.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Sin embargo, la asignaciÃ³n enlazada tambiÃ©n tiene sus desventajas.</p>
</div>
<div class="sect4">
<h5 id="_eficiencia_en_accesos_aleatorios"><a class="anchor" href="#_eficiencia_en_accesos_aleatorios"></a>Eficiencia en accesos aleatorios</h5>
<div class="paragraph">
<p>La <strong>asignaciÃ³n enlazada</strong> solo resulta eficaz para acceder a los archivos de acceso secuencial.</p>
</div>
<div class="paragraph">
<p>Si necesitamos ir directamente al bloque i-Ã©simo de un archivo, tendremos que comenzar desde el principio e ir leyendo cada bloque para obtener el puntero que nos indica el siguiente bloque.
Es muy posible que esas lecturas debÃ¡n ir precedidas de un reposicionamiento de los cabezales del disco.</p>
</div>
<div class="paragraph">
<p>Una soluciÃ³n parcial a esto puede ser guardar en la memoria una cachÃ© de las direcciones de los bloques de los archivos accedidos recientemente.</p>
</div>
</div>
<div class="sect4">
<h5 id="_eficiencia_en_el_uso_del_espacio_de_almacenamiento"><a class="anchor" href="#_eficiencia_en_el_uso_del_espacio_de_almacenamiento"></a>Eficiencia en el uso del espacio de almacenamiento</h5>
<div class="paragraph">
<p>En la <strong>asignaciÃ³n enlazada</strong> se pierde cierta cantidad de espacio con los punteros.</p>
</div>
<div class="paragraph">
<p>Si, por ejemplo, un puntero ocupa 4 bytes y un bloque tienen un tamaÃ±o de 512 bytes, el 0.758% del espacio en disco serÃ¡ utilizado para los punteros, en lugar de para almacenar informaciÃ³n Ãºtil.</p>
</div>
<div class="paragraph">
<p>La soluciÃ³n para este problema consiste en asignar los bloques en grupos âdenominados <strong>clÃºsteres</strong>â.
AsÃ­, el primer bloque de cada <strong>clÃºster</strong> solo tendrÃ­a que almacenar un puntero al siguiente <strong>clÃºster</strong>, lo que reducirÃ­a la cantidad de espacio desperdiciada en los punteros y mejorarÃ­a la eficiencia al reducir el nÃºmero de reposicionamientos del cabezal del disco.
Sin embargo, esto tambiÃ©n incrementa el grado de <strong>fragmentaciÃ³n interna</strong> pues se pierde mÃ¡s espacio cuando un <strong>clÃºster</strong> estÃ¡ parcialmente lleno.</p>
</div>
</div>
<div class="sect4">
<h5 id="_fiabilidad"><a class="anchor" href="#_fiabilidad"></a>Fiabilidad</h5>
<div class="paragraph">
<p>Teniendo en cuenta que los archivos estÃ¡n enlazados mediante punteros, parte de un archivo se puede corromper fÃ¡cilmente con que solo uno de esos punteros se pierda o resulte daÃ±ado.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">AsignaciÃ³n enlazada en FAT y FAT32</div>
<div class="paragraph">
<p>Los sistemas de archivos <a href="https://es.wikipedia.org/wiki/Tabla_de_asignaci%C3%B3n_de_archivos">FAT</a> y <a href="https://es.wikipedia.org/w/index.php?title=FAT32">FAT32</a> utilizan una variante del mecanismo de asignaciÃ³n enlazada en la que se emplea una <strong>tabla de asignaciÃ³n de archivo</strong> o <strong>FAT</strong> (<em>File-Allocation Table</em>).</p>
</div>
<div class="paragraph">
<p>La FAT se almacena en una secciÃ³n al principio del volumen.
Contiene una entrada por cada <strong>clÃºster</strong> del disco y en cada una guarda el nÃºmero del siguiente <strong>clÃºster</strong> del archivo.
Es decir, lo que hace la FAT es agrupar en un solo lugar los punteros de la <strong>asignaciÃ³n enlazada</strong>.</p>
</div>
<div id="fig-estructura-fat" class="imageblock">
<div class="content">
<img src="media/C20-implemantaciÃ³n_sistema_de_archivos/estructura_fat.svg" alt="estructura fat">
</div>
<div class="title">Figura 66. AsignaciÃ³n enlazada en el sistema de archivos FAT.</div>
</div>
<div class="paragraph">
<p>Eso significa que la FAT es una estructura crÃ­tica.
Si se corrompe, puede provocar la pÃ©rdida de todo el sistema de archivos.
Por eso, realmente se almacenan dos copias de la FAT al principio del volumen.</p>
</div>
<div class="paragraph">
<p>El indexar con clÃºsteres âo grupos de bloquesâ sirve para ubicar cerca bloques contiguos, pero sobre todo es una decisiÃ³n de diseÃ±o para permitir que los sistemas de archivos <a href="https://es.wikipedia.org/wiki/Tabla_de_asignaci%C3%B3n_de_archivos">FAT</a> puedan gestionar volÃºmenes mÃ¡s grandes.
Por ejemplo, la FAT de MS-DOS 3.0 y posteriores usaba 16 bits para numerar los clÃºsteres âpor eso se llamaba FAT16â.
Si FAT16 trabaja directamente con bloques y cada bloque tuviera 512 bytes, no podrÃ­a gestionar volÃºmenes de mÃ¡s de 512&#215;2<sup>16</sup> bytes, es decir, 32 MiB.
Sin embargo, trabajando con 64 bloques por clÃºster, se puede usar para gestionar volÃºmenes de hasta 2 GiB.</p>
</div>
<div class="paragraph">
<p>Aunque algunas versiones de Microsoft Windows NT llegaron a admitir 128 e, incluso, 512 bloques por clÃºster, con clÃºsteres tan grandes la <strong>fragmentaciÃ³n interna</strong> es un problema.</p>
</div>
<div class="paragraph">
<p>Por eso âentre otras cosasâ Microsoft introdujo <a href="https://es.wikipedia.org/w/index.php?title=FAT32">FAT32</a>, que utiliza 32 bits para numerar los clÃºsteres.
Eso implica poder gestionar mÃ¡s cantidad de clÃºsteres, lo que permite gestionar volÃºmenes mÃ¡s grandes con clÃºsteres mÃ¡s pequeÃ±os y, por tanto, con menor <strong>fragmentaciÃ³n interna</strong>.
Por ejemplo, <a href="https://es.wikipedia.org/w/index.php?title=FAT32">FAT32</a> podÃ­a gestionar volÃºmenes de hasta 2 TiB con 64 bloques por clÃºster.</p>
</div>
<div class="paragraph">
<p>Como se puede ver en la <a href="implementaciÃ³n_de_sistemas_de_archivos.html#fig-estructura-fat">Figura 66</a>, en los sistemas de archivos <a href="https://es.wikipedia.org/wiki/Tabla_de_asignaci%C3%B3n_de_archivos">FAT</a> cada entrada de directorio contiene, aparte del nombre del archivo y otros atributos, el nÃºmero del primer clÃºster con datos del archivo.
La entrada de la FAT indexada segÃºn ese nÃºmero contiene el nÃºmero del siguiente clÃºster del archivo.
Iterando de esa manera, se puede conocer los nÃºmeros de todos los clÃºsteres de un archivo.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Nota"></i>
</td>
<td class="content">
<div class="paragraph">
<p>El Ãºltimo bloque del archivo se indica con un valor especial en su entrada en la FAT.
Mientras que los bloques no utilizados se indican con un valor igual a 0 en su entrada en la FAT.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>El uso de la FAT puede provocar un nÃºmero importante de reposicionamientos del cabezal de disco, debido a que siempre es necesario volver al principio del volumen para leer dicha tabla.
Por eso, es muy habitual que el sistema operativo intente mantener una copia de la FAT en la memoria, a modo de cachÃ©.</p>
</div>
<div class="paragraph">
<p>Una de las ventajas de este esquema es que mejora el tiempo de los accesos aleatorios a los archivos ârespecto a la asignaciÃ³n enlazada convencionalâ porque se puede conocer la ubicaciÃ³n de cualquier bloque a partir de la informaciÃ³n en la FAT, sin tener que leer todos los bloques del archivo uno a uno.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_asignaciÃ³n_indexada"><a class="anchor" href="#_asignaciÃ³n_indexada"></a>20.2.3. AsignaciÃ³n indexada</h4>
<div class="paragraph">
<p>
El mecanismo de <strong>asignaciÃ³n indexada</strong> agrupa todos los punteros de la asignaciÃ³n enlazada en una Ãºnica ubicaciÃ³n: el <strong>bloque de Ã­ndices</strong>.
AsÃ­ se resuelve la falta de eficiencia de la asignaciÃ³n enlazada convencional âen ausencia de FATâ cuando se realizan accesos aleatorios.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>En la <strong>asignaciÃ³n indexada</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Cada archivo tiene su propio <strong>bloque de Ã­ndices</strong>, que es un bloque del disco con una tabla con los nÃºmeros de los bloques del disco que contienen los datos del archivo.</p>
</li>
<li>
<p>La entrada i-Ã©sima del bloque de Ã­ndice contiene la direcciÃ³n del bloque i-Ã©simo del archivo.</p>
</li>
<li>
<p>Cada entrada de directorio contiene la direcciÃ³n del bloque de Ã­ndices del archivo correspondiente.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Este mecanismo soporta el acceso aleatorio eficiente, ademÃ¡s de no sufrir el problema de la fragmentaciÃ³n externa.
Sin embargo, tambiÃ©n tiene sus desventajas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Se pierde mÃ¡s espacio en los punteros que con el mecanismo de asignaciÃ³n enlazada, pues siempre hay que reservar un <strong>bloque de Ã­ndices</strong> completo para cada archivo.
Mientras que con la asignaciÃ³n enlazada, solo se pierde el espacio de los punteros que realmente es necesario utilizar.</p>
</li>
<li>
<p>Al diseÃ±ar el sistema de archivos debemos determinar el tamaÃ±o del <strong>bloque de Ã­ndices</strong>.</p>
<div class="paragraph">
<p>Por el inconveniente anterior y puesto que cada archivo debe tener un bloque de Ã­ndices, ese bloque debe ser lo mÃ¡s pequeÃ±o posible para no perder espacio.
Pero si es demasiado pequeÃ±o, no podrÃ¡ almacenar suficientes punteros para un archivo de gran tamaÃ±o.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Entre los mecanismos que pueden utilizarse para resolver este Ãºltimo problema estÃ¡n los siguientes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>En el <strong>esquema enlazado</strong>, se enlazan los bloques de Ã­ndices.</p>
<div class="paragraph">
<p>Por ejemplo, se puede utilizar el Ãºltimo puntero del bloque de Ã­ndices para apuntar al siguiente bloque de Ã­ndices.
Si dicho puntero tiene valor 0, entonces estamos en el Ãºltimo bloque de Ã­ndices del archivo.</p>
</div>
</li>
<li>
<p>En el <strong>Ã­ndice multinivel</strong>, los punteros del bloque de Ã­ndices no seÃ±alan a los bloques del archivo, sino a un conjunto de bloques de Ã­ndices de segundo nivel y estos, a su vez seÃ±alan, a los bloques del archivo.
Esta tÃ©cnica puede ampliarse utilizando un tercer o cuarto nivel, dependiendo del tamaÃ±o mÃ¡ximo de archivo que se desee.</p>
</li>
<li>
<p>En el <strong>esquema combinado</strong> las primeras entradas del bloque de Ã­ndices apuntan directamente a los primeros bloques del archivo.
Mientras que las siguientes entradas contiene punteros indirectos, que apunta a un conjunto de bloques de Ã­ndices de segundo nivel.
DespuÃ©s podrÃ­a haber entradas que contienen punteros doblemente indirectos y luego entradas con punteros triplemente indirectos.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Para mejorar el rendimiento de los mecanismos de asignaciÃ³n indexados, es muy comÃºn que el sistema operativo intente mantener los bloques de Ã­ndices en la memoria.</p>
</div>
<div id="fig-asignaciÃ³n-ext2" class="imageblock">
<div class="content">
<img src="media/C20-implemantaciÃ³n_sistema_de_archivos/asignaciÃ³n_ext2.svg" alt="asignaciÃ³n ext2">
</div>
<div class="title">Figura 67. AsignaciÃ³n indexada combinada en el sistema de archivos ext2.</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Nota"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Los sistemas de archivos <a href="https://es.wikipedia.org/wiki/Ext2">ext2</a> y <a href="https://es.wikipedia.org/wiki/Ext3">ext3</a> utilizan el mecanismo de <strong>asignaciÃ³n indexada</strong> con <strong>esquema combinado</strong>.
Concretamente el mecanismo en <a href="https://es.wikipedia.org/wiki/Ext2">ext2</a> se implementa de la siguiente manera:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>El disco se divide en mÃºltiples grupos de bloques de disco.</p>
</li>
<li>
<p>En cada grupo, se utilizan los primeros bloques para almacenar una tabla de <strong>inodos</strong>.
Estos <strong>inodos</strong> son los <strong>FCB</strong> de los archivos almacenados en el grupo.</p>
<div class="paragraph">
<p>El resto de los bloques se utilizan para almacenar los datos de los archivos representados por los <strong>inodos</strong> del grupo.</p>
</div>
</li>
<li>
<p>Dentro de cada <strong>inodo</strong> âentre otra informaciÃ³n tÃ­pica en un <strong>FCB</strong>â se almacenan los punteros a los bloques del archivo, en lugar de utilizar un bloque de Ã­ndices aparte.</p>
</li>
<li>
<p>Como se puede ver en la <a href="implementaciÃ³n_de_sistemas_de_archivos.html#fig-asignaciÃ³n-ext2">Figura 67</a>, los primeros 12 punteros en el <strong>inodo</strong> son directos, seguidos de un puntero indirecto, un puntero doblemente indirecto y uno triplemente indirecto.
Esto permite almacenar hasta 2<sup>64</sup> bytes de informaciÃ³n en cada archivo.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gestiÃ³n_del_espacio_libre"><a class="anchor" href="#_gestiÃ³n_del_espacio_libre"></a>20.3. GestiÃ³n del espacio libre</h3>
<div class="paragraph">
<p>Puesto que el espacio en disco es limitado, necesitamos poder reutilizar el espacio de los archivos borrados.
Para controlar el espacio libre en el disco, el sistema de archivos mantiene una <strong>lista de espacio libre</strong> que contiene todos los bloques de disco disponibles.
Para crear un archivo, se explora la <strong>lista de espacio libre</strong> hasta obtener la cantidad de espacio requerida y se asigna ese espacio al nuevo archivo.</p>
</div>
<div class="paragraph">
<p>A continuaciÃ³n estudiaremos las diferentes maneras de implementar esa lista.</p>
</div>
<div class="sect3">
<h4 id="_vector_de_bits"><a class="anchor" href="#_vector_de_bits"></a>20.3.1. Vector de bits</h4>
<div class="paragraph">
<p>La lista de espacio libre puede ser implementada como un <strong>vector de bits</strong> o <strong>mapa de bits</strong>, donde cada bloque es representado por un bit.
Si el bloque estÃ¡ libre, el bit estÃ¡ a 1, mientras que si el bloque estÃ¡ asignado, el bit estÃ¡ a 0.</p>
</div>
<div class="paragraph">
<p>Este enfoque es relativamente sencillo y eficiente, puesto que muchos procesadores disponen de instrucciones para manipular bits, que pueden utilizarse para obtener rÃ¡pidamente el primer bloque libre.
Por ejemplo, la familia de procesadores <a href="https://es.wikipedia.org/wiki/IA-32">x86</a>, a partir del <a href="https://es.wikipedia.org/wiki/Intel_80386">Intel 80386</a>, tiene instrucciones que devuelven la posiciÃ³n del primer bit a 1 en el valor de un registro.</p>
</div>
<div class="paragraph">
<p>Sin embargo, leer el vector de bits, modificarlo y actualizarlo en disco en cada ocasiÃ³n, es tremendamente ineficiente.
Por tanto, usar vectores de bits es ineficiente, a menos que se mantenga el vector completo en la memoria principal, escribiÃ©ndose ocasionalmente en el disco.</p>
</div>
<div class="paragraph">
<p>Esto Ãºltimo puede ser imposible para los discos de gran tamaÃ±o, en funciÃ³n de la cantidad de memoria principal.
Por ejemplo, un disco de 40 GiB con bloques de 512 bytes necesitarÃ¡ un mapa de bits de mÃ¡s de 10 MiB, lo que no es un gran requisito para un sistema moderno, pero sÃ­ lo era hace dos dÃ©cadas.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Nota"></i>
</td>
<td class="content">
<div class="paragraph">
<p>El sistema de archivo NTFS y la familia <em>extended filesystem</em> âes decir, <a href="https://es.wikipedia.org/wiki/Extended_file_system">ext</a>, <a href="https://es.wikipedia.org/wiki/Ext2">ext2</a>, <a href="https://es.wikipedia.org/wiki/Ext3">ext3</a> y {ext4â utilizan mapas de bits, tanto para gestionar los bloques de datos libres como las entradas disponibles en la tabla de <strong>inodos</strong>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_lista_enlazada"><a class="anchor" href="#_lista_enlazada"></a>20.3.2. Lista enlazada</h4>
<div class="paragraph">
<p>Otra tÃ©cnica consiste en enlazar todos los bloques de disco libres.
Para eso se puede guardar un puntero al primer bloque libre en una ubicaciÃ³n especial del disco y que ese bloque contenga un puntero al siguiente bloque libre del disco.
El segundo bloque contenga un puntero al tercer bloque libre, y asÃ­ sucesivamente.</p>
</div>
<div class="paragraph">
<p>El inconveniente es que recorrer la lista no resulta eficiente, pues tenemos que leer cada bloque para conocer la direcciÃ³n del siguiente bloque libre en disco.
Sin embargo, debemos tener en cuenta que no es frecuente tener que recorrer la lista de espacio libre completa porque, por lo general, basta con encontrar el primer bloque libre para asignar el espacio.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Nota"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Los sistemas de archivos <a href="https://es.wikipedia.org/wiki/Tabla_de_asignaci%C3%B3n_de_archivos">FAT</a> incorporan el control de bloques libres dentro de la <strong>tabla de asignaciÃ³n de archivos</strong> guardando un 0 en las entradas de los <strong>clÃºsteres</strong> libres, por lo que no se necesita ningÃºn mÃ©todo adicional.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_agrupamiento"><a class="anchor" href="#_agrupamiento"></a>20.3.3. Agrupamiento</h4>
<div class="paragraph">
<p>Una modificaciÃ³n de la tÃ©cnica basada en la lista enlazada consiste en almacenar las direcciones de <em>N</em> bloques libres en el primer bloque libre.
Los primeros <em>N â 1</em> de esos bloques estarÃ­an realmente libres, pero el Ãºltimo de ellos apuntarÃ­a a otro bloque con <em>N</em> bloques libres.
AsÃ­ podrÃ­an localizarse rÃ¡pidamente las direcciones de un gran nÃºmero de bloques libres, lo cual mejora la eficiencia respecto a la tÃ©cnica de lista enlazada.</p>
</div>
</div>
<div class="sect3">
<h4 id="_recuento"><a class="anchor" href="#_recuento"></a>20.3.4. Recuento</h4>
<div class="paragraph">
<p>Generalmente los bloques son asignados o liberados en bloques contiguos, especialmente si el espacio es asignado mediante asignaciÃ³n contigua o en <strong>extensiones</strong> o <strong>clÃºsteres</strong>.
Esto puede ser aprovechado para mantener una lista donde cada entrada almacena la direcciÃ³n del primer bloque de un conjunto de bloques libres contiguo, asÃ­ como el nÃºmero de bloques del conjunto.</p>
</div>
<div class="paragraph">
<p>Por ejemplo, el sistema de archivos <a href="https://es.wikipedia.org/wiki/XFS">XFS</a> utiliza un Ã¡rbol B+ para almacenar las direcciones de las extensiones de bloques libres y mantenerlas ordenadas por el tamaÃ±o de la extensiÃ³n a la que apuntan.
AsÃ­ el sistema operativo puede localizar rÃ¡pidamente el espacio libre necesario para satisfacer una necesidad concreta.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sistemas_de_archivos_virtuales"><a class="anchor" href="#_sistemas_de_archivos_virtuales"></a>20.4. Sistemas de archivos virtuales</h3>
<div class="paragraph">
<p>En el <a href="sistema_de_archivos.html#_montaje_de_sistemas_de_archivos">Apartado 19.4</a> vimos cÃ³mo el sistema operativo <strong>monta</strong> sistemas de archivos de tal forma que aparenten estar integrados en una Ãºnica estructura de directorios, permitiendo a los usuarios moverse de forma transparente entre distintos dispositivos y tipos de sistemas de archivos.
Para hacerlo, un sistema operativo moderno debe ser capaz de soportar de manera eficiente distintos tipos de sistemas de archivos, ocultando sus diferencias de cara a los usuarios.</p>
</div>
<div class="paragraph">
<p>Un mÃ©todo para implementar mÃºltiples tipos de sistemas de archivos consiste en escribir diferentes rutinas de acceso, manipulaciÃ³n y gestiÃ³n âde los directorios y archivosâ para cada uno de los tipos de sistema de archivo existentes.
Sin embargo, en lugar de esta soluciÃ³n, la mayorÃ­a de los sistemas operativos utilizan tÃ©cnicas de programaciÃ³n orientada a objetos para implementar diferentes tipos de sistemas de archivos detrÃ¡s de una misma interfaz de programaciÃ³n.
Es decir, se utilizan estructuras de datos y procedimientos comunes para separar las llamadas al sistema de los detalles de su implementaciÃ³n real, para cada uno de los sistemas de archivos.</p>
</div>
<div class="paragraph">
<p>La implementaciÃ³n de un sistema de archivos estÃ¡ compuesta de tres niveles fundamentales: la <strong>interfaz del sistema de archivos</strong>, el <strong>sistema de archivos virtual</strong> y, finalmente, la implementaciÃ³n real del sistema de archivos.</p>
</div>
<div class="sect3">
<h4 id="_interfaz_del_sistema_de_archivos"><a class="anchor" href="#_interfaz_del_sistema_de_archivos"></a>20.4.1. Interfaz del sistema de archivos</h4>
<div class="paragraph">
<p>
El primer nivel es la <strong>interfaz del sistema de archivos</strong>, a la que acceden los desarrolladores a travÃ©s de las llamadas al sistema.
En sistemas POSIX, estamos hablando de las llamadas <a href="https://man7.org/linux/man-pages/man2/open.2.html">open()</a>, <a href="https://man7.org/linux/man-pages/man2/read.2.html">read()</a>, <a href="https://man7.org/linux/man-pages/man2/write.2.html">write()</a> y <a href="https://man7.org/linux/man-pages/man2/close.2.html">close()</a>, entre otras.
Y de los descriptores de archivos con los que se identifican los archivos abiertos.</p>
</div>
<div class="paragraph">
<p>Esta interfaz es la misma sea cual sea el sistema de archivos al que se estÃ© intentando acceder.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sistema_de_archivos_virtual"><a class="anchor" href="#_sistema_de_archivos_virtual"></a>20.4.2. Sistema de archivos virtual</h4>
<div class="paragraph">
<p>
El segundo nivel es la interfaz del <strong>sistema de archivos virtual</strong> o <strong>VFS</strong> (<em>Virtual File System</em>).
Este nivel es utilizado por el anterior para atender las peticiones realizadas.</p>
</div>
<div class="paragraph">
<p>Describe operaciones genÃ©ricas sobre cualquier sistema de archivos y estructuras genÃ©ricas.
Por ejemplo, el <strong>FCB virtual</strong>, que identifica de forma unÃ­voca a cada archivo o directorio en uso en todo el sistema, dando acceso a sus metadatos.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Nota"></i>
</td>
<td class="content">
<div class="paragraph">
<p>En Linux el <strong>FCB virtual</strong> se denomina <strong>vnodo</strong>.
El <strong>vnodo</strong> de un archivo lo identifica de forma unÃ­voca en todo el sistema, incluso diferenciando archivos en sistemas de archivos diferentes.
Mientras que el <strong>inodo</strong> es un detalle de la implementaciÃ³n real del sistema de archivos, por lo que solo es Ãºnico dentro del mismo sistema de archivos.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Este nivel cumple con dos importantes funciones:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Separa las operaciones genÃ©ricas sobre el sistema de archivos con respecto a su implementaciÃ³n.</p>
<div class="paragraph">
<p><strong>VFS</strong> define una interfaz muy clara y comÃºn para todos los sistemas de archivos.
De esta interfaz existirÃ¡n diversas implementaciones en el mismo sistema, una para cada sistema de archivos diferente.</p>
</div>
</li>
<li>
<p>Proporcionar un mecanismo para acceder de forma coherente a los archivos a travÃ©s de la red.</p>
<div class="paragraph">
<p>Una implementaciÃ³n de <strong>VFS</strong> no tiene que estar limitada exclusivamente a ofrecer acceso a archivos en dispositivos conectados fÃ­sicamente al sistema.
Las operaciones de la interfaz <strong>VFS</strong> pueden implementarse de tal forma que usen un protocolo de acceso a algÃºn servidor de archivos conectado a la red.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_implementaciÃ³n_del_sistema_de_archivos"><a class="anchor" href="#_implementaciÃ³n_del_sistema_de_archivos"></a>20.4.3. ImplementaciÃ³n del sistema de archivos</h4>
<div class="paragraph">
<p>El tercer nivel es donde se implementa cada tipo de sistema de archivos o los distintos protocolos de los servidores de archivos en la red.
La interfaz <strong>VFS</strong> recurre a la implementaciÃ³n correspondiente para cada tipo de sistema de archivos, para satisfacer las solicitudes de los niveles superiores.</p>
</div>
<div class="paragraph">
<p>AsÃ­, por ejemplo, un <a href="https://man7.org/linux/man-pages/man2/read.2.html">read()</a> puede implicar que se tenga que recuperar el <strong>vnodo</strong> del archivo involucrado desde la tabla de archivos abiertos, usando el descriptor de archivo indicado en la llamada al sistema.
DespuÃ©s, se invoca la operaciÃ³n <strong>VFS</strong> <code>read()</code> sobre el <strong>vnodo</strong>, en la implementaciÃ³n concreta de <strong>VFS</strong> segÃºn el tipo de sistema de archivos involucrado.
SerÃ¡ esa implementaciÃ³n quien extraiga del <strong>vnodo</strong> la informaciÃ³n necesaria âpor ejemplo, el <strong>inodo</strong> real del archivo en el sistema de archivosâ para llevar a cabo la operaciÃ³n indicada, segÃºn las especificidades del sistema de archivos.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_planificaciÃ³n_de_disco"><a class="anchor" href="#_planificaciÃ³n_de_disco"></a>20.5. PlanificaciÃ³n de disco</h3>
<div class="paragraph">
<p>Como ya hemos comentado, es responsabilidad del sistema operativo usar los recursos del hardware de forma eficiente.
Eso incluye planificar los procesos en la CPU para conseguir el mÃ­nimo tiempo de espera que sea posible o aprovechar de la mejor forma la memoria principal disponible para atender la demanda de los distintos procesos al mismo tiempo; pero tambiÃ©n, intentar obtener el menor tiempo de acceso y el mayor ancho de banda posible en el acceso a los discos.</p>
</div>
<div class="sect3">
<h4 id="_rendimiento_del_acceso_a_disco"><a class="anchor" href="#_rendimiento_del_acceso_a_disco"></a>20.5.1. Rendimiento del acceso a disco</h4>
<div class="paragraph">
<p>En un disco duro magnÃ©tico el <strong>tiempo de acceso al disco</strong> <em>T<sup>d</sup></em> viene determinado por el <strong>tiempo de bÃºsqueda</strong> <em>T<sup>b</sup></em> y la <strong>latencia rotacional</strong> <em>T<sup>r</sup></em>:</p>
</div>
<div class="stemblock">
<div class="content">
\$T_d=T_b+T_r\$
</div>
</div>
<div class="paragraph">
<p>El <strong>tiempo de bÃºsqueda</strong> <em>T<sup>b</sup></em> es el tiempo que se tarda en mover el brazo del disco hasta el cilindro deseado.
Mientras que la <strong>latencia rotacional</strong> <em>T<sup>r</sup></em> es el tiempo que hay que esperar para que el disco gira hasta que la cabeza llegue al sector deseado del cilindro.
Por lo tanto, el <strong>tiempo de acceso al disco</strong> es menor cuando se realizan accesos consecutivos a sectores fÃ­sicamente prÃ³ximos que cuando estÃ¡n dispersos por todo el disco.</p>
</div>
<div class="paragraph">
<p>El <strong>ancho de banda</strong> o <strong>tasa de transferencia</strong> del disco es el total de bytes transferidos en una peticiÃ³n dividida por el tiempo total que transcurre desde la primera solicitud de servicio hasta el final de la Ãºltima transferencia, con la que se termina de atender la peticiÃ³n.
Al considerar todo el tiempo necesario para atender la peticiÃ³n, a mÃ¡s <strong>tiempo de acceso al disco</strong> menor es el <strong>ancho de banda</strong>.</p>
</div>
<div class="paragraph">
<p>En los dispositivos de almacenamiento basados en memorias de estado sÃ³lido (vÃ©ase el <a href="almacenamiento_secundario.html#_memorias_de_estado_sÃ³lido">Apartado 18.1.3</a>) el tiempo de acceso viene determinado por las caracterÃ­sticas de la memoria âentre otros factoresâ lo que hace que las diferencias entre accesos secuenciales y accesos aleatorios sean mucho menos significativas.</p>
</div>
</div>
<div class="sect3">
<h4 id="_cola_de_es_al_disco"><a class="anchor" href="#_cola_de_es_al_disco"></a>20.5.2. Cola de E/S al disco</h4>
<div class="paragraph">
<p>
Cuando se solicita una operaciÃ³n de E/S sobre el almacenamiento, si la controladora y la unidad de disco estÃ¡n desocupadas, el sistema operativo puede atender la peticiÃ³n sobre la marcha.
Pero si estÃ¡n ocupadas, el sistema operativo almacena la solicitud en una cola de peticiones pendientes.
Cuando se resuelve una solicitud, el sistema operativo escoge otra de la cola y se comunica con el hardware para programar la siguiente peticiÃ³n.
La cuestiÃ³n es Â¿cuÃ¡l es el orden adecuado para escoger la peticiones de E/S de la cola, si se quiere acceder al disco de la forma mÃ¡s eficaz posible?</p>
</div>
</div>
<div class="sect3">
<h4 id="_planificaciÃ³n_fcfs_2"><a class="anchor" href="#_planificaciÃ³n_fcfs_2"></a>20.5.3. PlanificaciÃ³n FCFS</h4>
<div class="paragraph">
<p>
En la planificaciÃ³n <strong>FCFS</strong> (<em>First Come, First Served</em>) o <strong>primero que llega, primero servido</strong> la cola de E/S al disco es FIFO.
Es decir, que las solicitudes se atienden en orden de llegada.</p>
</div>
<div class="paragraph">
<p>Es el algoritmo de planificaciÃ³n mÃ¡s simple y es equitativo, en sentido de que atiende a todos los procesos por igual.
Pero, lamentablemente, no proporciona el servicio mÃ¡s rÃ¡pido en discos duros magnÃ©ticos, donde interesa mover el brazo del disco lo menos posible.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Nota"></i>
</td>
<td class="content">
<div class="paragraph">
<p>En Linux el <strong>FCFS</strong> es actualmente denominado <strong>NOOP</strong>.
Se suele utilizar en los discos basados en memorias de estado sÃ³lido, donde reordenar las solicitudes no proporciona una mejora significativa del rendimiento, o cuando se utilizan controladoras de disco inteligentes que pueden reordenar las solicitudes segÃºn su propio criterio.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_planificaciÃ³n_sstf"><a class="anchor" href="#_planificaciÃ³n_sstf"></a>20.5.4. PlanificaciÃ³n SSTF</h4>
<div class="paragraph">
<p>
En la planificaciÃ³n <strong>SSTF</strong> (<em>Sortest</em> <em>Seek Time First</em>) o algoritmo de <strong>tiempo de bÃºsqueda mÃ¡s corto</strong>, de toda cola se selecciona la solicitud con el menor <strong>tiempo de bÃºsqueda</strong> desde la posiciÃ³n actual de la cabeza.
Este algoritmo de planificaciÃ³n primero da servicio a las solicitudes cercanas a la posiciÃ³n actual de la cabeza, antes de alejarse para dar servicio a otras solicitudes, dado que el <strong>tiempo de bÃºsqueda</strong> se incrementa a medida que lo hace el nÃºmero de cilindros que es necesario recorrer para llegar a una posiciÃ³n dada.</p>
</div>
<div class="paragraph">
<p>Aun asÃ­, la soluciÃ³n no es Ã³ptima, dado que puede provocar inaniciÃ³n de algunas solicitudes, si van llegando constantemente nuevas solicitudes sobre regiones cercanas a donde estÃ¡ actualmente la cabeza del disco.</p>
</div>
</div>
<div class="sect3">
<h4 id="_planificaciÃ³n_scan_y_c_scan"><a class="anchor" href="#_planificaciÃ³n_scan_y_c_scan"></a>20.5.5. PlanificaciÃ³n SCAN y C-SCAN</h4>
<div class="paragraph">
<p>
En la planificaciÃ³n <strong>SCAN</strong>, algoritmo de <strong>exploraciÃ³n</strong> o del <strong>ascensor</strong>, el brazo del disco comienza en un extremo del disco y se mueve hacia el otro, atendiendo solicitudes a medida que pasa por cada cilindro, hasta llegar al otro extremo del disco.
En el otro extremo, la direcciÃ³n de movimiento de la cabeza se invierte para recorrer el disco en sentido inverso, repitiendo el proceso.</p>
</div>
<div class="paragraph">
<p>Suponiendo que las solicitudes se distribuyen de forma uniforme a lo largo del disco, es de suponer que cuando se llega a un extremo âjusto antes de volverâ la cantidad de solicitudes en dicho extremo serÃ¡ notablemente menor que dÃ³nde comenzÃ³ el barrido que acaba de terminar.
Entonces Â¿por quÃ© no volver a empezar desde ese extremo?</p>
</div>
<div class="paragraph">
<p>A la variante del <strong>SCAN</strong> que cuando llega a un extremo vuelve al inicio, para volver a barrer desde allÃ­, sin atender ninguna solicitud por el camino, se la denomina <strong>C-SCAN</strong> âde <em>Circula SCAN</em>â.
Con esta variante el tiempo que tiene que esperar una solicitud para ser atendida es mÃ¡s uniforme que con el algoritmo <strong>SCAN</strong> original.</p>
</div>
</div>
<div class="sect3">
<h4 id="_planificaciÃ³n_look_y_c_look"><a class="anchor" href="#_planificaciÃ³n_look_y_c_look"></a>20.5.6. PlanificaciÃ³n LOOK y C-LOOK</h4>
<div class="paragraph">
<p>
En teorÃ­a los algoritmos <strong>SCAN</strong> y <strong>C-SCAN</strong> hacen que el brazo recorra los cilindros del primero al Ãºltimo, pero normalmente no se suelen implementar asÃ­.</p>
</div>
<div class="paragraph">
<p>Por lo general, cuando en el recorrido del brazo, tras atender una solicitud, se descubre que ya no hay mÃ¡s solicitudes siguiendo la misma direcciÃ³n, el brazo invierte la direcciÃ³n sin llegar hasta el extremo del disco.</p>
</div>
<div class="paragraph">
<p>A estas variantes de <strong>SCAN</strong> y <strong>C-SCAN</strong> se las denomina <strong>(LOOK)</strong> y <strong>(C-LOOK)</strong>, respectivamente.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Nota"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Linux utilizÃ³ <strong>C-LOOK</strong>, bajo el nombre de <strong><em>elevator</em></strong>, como planificador de E/S de disco hasta Linux 2.6.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_planificaciÃ³n_n_step_scan_n_step_look_y_f_scan"><a class="anchor" href="#_planificaciÃ³n_n_step_scan_n_step_look_y_f_scan"></a>20.5.7. PlanificaciÃ³n N-Step-SCAN, N-Step-LOOK y F-SCAN</h4>
<div class="paragraph">
<p>
Los algoritmos <strong>N-Step-SCAN</strong> y <strong>N-Step-LOOK</strong> son variantes de los algoritmos <strong>SCAN</strong> y <strong>LOOK</strong>, respectivamente; donde se limita a <em>N</em> el nÃºmero de solicitudes que se atenderÃ¡n en cada barrido del brazo del disco.
Estos algoritmos funcionan de la siguiente manera:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Se utiliza una cola con espacio para <em>N</em> solicitudes pendientes, que se van atendiendo mientras el brazo barre el disco.</p>
</li>
<li>
<p>Mientras tanto, todas las nuevas solicitudes se incorporan a una cola diferente.</p>
</li>
<li>
<p>Cuando el brazo termina el barrido y las <em>N</em> primeras solicitudes han sido atendidas, el planificador toma otras <em>N</em> solicitudes de la segunda cola y las introduce en la primera para repetir el proceso.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Si en lugar de copiar <em>N</em> peticiones de la segunda a la primera cola, se copian todas las solicitudes pendientes, el algoritmo se denomina <strong>F-SCAN</strong>.</p>
</div>
<div class="paragraph">
<p>Estos algoritmos previenen un problema denominado <strong>rigidez del brazo</strong> âo <em>arm stickiness</em>, en inglÃ©sâ a diferencia de los algoritmos SSTF, SCAN, C-SCAN, LOOK y C-LOOK, que no lo hacen.
El tÃ©rmino <strong>rigidez del brazo</strong> hace referencia a cuando hay un flujo continuo de solicitudes para el mismo cilindro, esto hace que con los algoritmos vistos hasta ahora, el brazo no avance por los cilindros hasta llegar al otro extremo.
Como <strong>F-SCAN</strong>, <strong>N-Step-SCAN</strong> y <strong>N-Step-LOOK</strong> separan las solicitudes en dos colas âhaciendo que las nuevas tengan que esperarâ el brazo siempre continÃºa su barrido hacia el extremo del disco.</p>
</div>
</div>
<div class="sect3">
<h4 id="_planificaciÃ³n_cfq"><a class="anchor" href="#_planificaciÃ³n_cfq"></a>20.5.8. PlanificaciÃ³n CFQ</h4>
<div class="paragraph">
<p>
El planificador <strong>CFQ</strong> (<em>Completely Fair Queuing</em>) se diseÃ±Ã³ para compartir de forma equitativa el <strong>ancho de banda</strong> entre todos los procesos que solicitan acceso al disco.
Fue utilizado por defecto en muchas distribuciones de Linux hasta la versiÃ³n 5.0 del nÃºcleo y funciona de la siguiente manera:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>CFQ</strong> mantiene una cola de solicitudes para cada proceso y en ella inserta las solicitudes sÃ­ncronas de E/S.
Cada cola tiene una ventana de tiempo âo <strong>cuanto</strong>â para acceder al disco.
La longitud del <strong>cuanto</strong> y el tamaÃ±o mÃ¡ximo de cada cola dependen de la prioridad de E/S que tenga el proceso.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Nota"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Las solicitudes sÃ­ncronas de E/S son aquellas que hacen que el proceso permanezca en estado <strong>esperando</strong> hasta que se resuelve la peticiÃ³n.
Por ejemplo, las operaciones de lectura bloqueantes, como ocurre por defecto con <a href="https://man7.org/linux/man-pages/man2/read.2.html">read()</a>.
Mientras que las solicitudes asÃ­ncronas son las que permiten que el proceso continÃºe su ejecuciÃ³n en la CPU mientras se atiende la peticiÃ³n.
Como las escrituras con <a href="https://man7.org/linux/man-pages/man2/write.2.html">write()</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>CFQ</strong> mantiene una cola de solicitudes por cada prioridad de E/S, donde se insertan las solicitudes asÃ­ncronas de todos los procesos.
Una solicitud asÃ­ncrona se inserta en una cola u otra segÃºn la prioridad del proceso que la generÃ³.</p>
</li>
<li>
<p>Usando el algoritmo <strong><em>round-robin</em></strong>, el planificador <strong>CFQ</strong> recorre las colas y extrae de ellas las solicitudes durante el tiempo marcado por el cuanto de cada cola.
Las solicitudes extraÃ­das se insertan en la cola de E/S al disco, donde se ordenan para minimizar el <strong>tiempo de bÃºsqueda</strong>, antes de ser enviadas al dispositivo.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Nota"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Actualmente, los planificadores <strong>CFS</strong> y <strong>NOOP</strong> se consideran obsoletos.
En su lugar el planificador por defecto en Linux para SSD y discos duros es <strong>mq-deadline</strong> âuna adaptaciÃ³n del planificador <a href="https://en.wikipedia.org/wiki/Deadline_scheduler">deadline</a>, tambiÃ©n obsoletoâ.
Mientras que para dispositivos NVM Express se utiliza <strong>NONE</strong>, que bÃ¡sicamente desactiva la planificaciÃ³n de la E/S de disco.</p>
</div>
<div class="paragraph">
<p>Otros planificadores disponibles actualmente son <a href="http://algo.ing.unimo.it/people/paolo/disk_sched/">BFQ</a> âdiseÃ±ado para minimizar la latenciaâ y Kyber.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>âÂ Anterior:Â <a href="sistema_de_archivos.html">Sistemas de archivos</a>Â | âÂ Subir:Â <a href="gestiÃ³n_del_almacenamiento.html">GestiÃ³n del almacenamiento</a>Â | âÂ Inicio:Â <a href="main.html">Sistemas Operativos</a>Â | Siguiente:Â <a href="bibliografÃ­a.html">BibliografÃ­a</a>Â â</p>
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
<div id="footer">
    <div id="footer-text">
        Esta obra estÃ¡ sujeta a la licencia
        <a href="http://creativecommons.org/licenses/by/4.0/deed.es">Creative Commons AtribuciÃ³n 4.0 Internacional</a>,
        excepto donde se indique lo contrario.
    </div>
</div>
</body>
</html>